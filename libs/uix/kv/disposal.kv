#:import MDSeparator kivymd.uix.card.MDSeparator
#:import MDDropdownMenu kivymd.uix.menu.MDDropdownMenu
#:import License libs.uix.baseclass.license.License
#:import RecycleView kivy.uix.recycleview

# Экран задачи.

<Disposal>:
    name: 'disposal'
    task: task
    notes: notes
    files: files
    number: number
    urgency: urgency
    spinner: spinner
    notes_splitter: notes_splitter
    files_splitter: files_splitter

    MDSpinner:
        id: spinner
        size_hint: None, None
        size: dp(23), dp(23)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    BoxLayout:
        id: layout
        orientation: 'vertical'

        MDTopAppBar:
            id: actionbar
            pos_hint: {"top": 1}
            elevation: 10
            title: app.translation._('Задача')
            left_action_items: [['chevron-left', lambda x: app.back_screen(27)]]
            right_action_items: [['read', lambda x: app.set_readed()],['checkbox-marked-circle', lambda x: app.execute()],['skip-previous', lambda x: app.show_prior()],['skip-next', lambda x: app.show_next()]]

        Label:
            id: number
            size_hint: None, None
            height: dp(20)
            width: self.texture_size[0]
            halign: 'left'
            color: app.theme_cls.primary_color
            font_size: '14sp'
            padding: [10, 0]

        Label:
            id: urgency
            size_hint: None, None
            height: dp(20)
            width: self.texture_size[0]
            halign: 'left'
            font_size: '14sp'
            padding: [10, 0]

        MDSeparator:

        Label:
            id: sender
            size_hint: None, None
            height: dp(30)
            width: self.texture_size[0]
            halign: 'left'
            color: 0, 0, 0, 1
            font_size: '12sp'
            padding: [10, 0]

        Label:
            id: receiver
            size_hint: None, None
            height: dp(30)
            width: self.texture_size[0]
            halign: 'left'
            color: 0, 0, 0, 1
            font_size: '12sp'
            padding: [10, 0]

        MDSeparator:

        Label:
            id: theme
            halign: 'left'
            text_size: self.width, None
            size_hint: 1, None
            height: self.texture_size[1]
            font_size: '14sp'
            padding: [10, 10]

        MDSeparator:

        BoxLayout:
            orientation: 'vertical'

            Task:
                id: task
                viewclass: 'TaskLabel'
                RecycleBoxLayout:
                    default_size: None, dp(56)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'
                    padding: [10, 10]

            Splitter:
                id: files_splitter
                sizable_from: 'top'
                Files:
                    id: files
                    viewclass: 'TaskLabel'
                    RecycleBoxLayout:
                        default_size: None, dp(56)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
                        padding: [10, 10]

            Splitter:
                id: notes_splitter
                sizable_from: 'top'
                Notes:
                    id: notes
                    viewclass: 'NoteLabel'
                    RecycleBoxLayout:
                        id: notes_layout
                        default_size: None, dp(56)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'

    AddFileButton:
        id: file_button
        icon: 'file-upload'
        opposite_colors: True
        elevation_normal: 8
        #pos_hint: {'right':1}
        x: Window.width - (self.width + dp(15))
        y: dp(30) + self.height

    AddCommentButton:
        id: menu_button
        icon: 'comment'
        opposite_colors: True
        elevation_normal: 8
        #pos_hint: {'right':1}
        x: Window.width - (self.width + dp(15))
        y: dp(15)

<AddCommentButton>

<AddFileButton>

<Content>
    orientation: "vertical"
    spacing: '12dp'
    size_hint_y: None
    height: '300dp'

    MDTextField:
        id: comment_text
        multiline: True
        size_hint: 1, 1
        hint_text: app.translation._('Введите комментарий')



<Notes>

<Task>

<NoteLabel>
    halign: 'left'
    text_size: self.width, None
    size_hint: 1, None
    height: self.texture_size[1]
    color: 0, 0, 0, 1
    markup: True

<TaskLabel>
    halign: 'left'
    text_size: self.width, None
    size_hint: 1, None
    height: self.texture_size[1]
    color: 0, 0, 0, 1
    markup: True

